# 单词训练处理流程文档 (听说读写版)

本文档说明了系统如何针对单词（特别是通过课本/单词表照片）生成全方位的“听说读写”训练流程。

## 1. 总体流程概览

流程从“单词识别”延伸到“多维训练生成”：

**照片上传** -> **视觉单词提取** -> **多维题型加工** -> **语音服务集成** -> **听说读写训练**

---

## 2. 流程详细说明

### 第一步：视觉单词提取 (Visual Vocabulary Extraction)
系统通过多模态 AI 对用户拍摄的课本页面或单词表进行深度扫描。
- **提取内容**：不仅提取单词本身，还自动补全其中文含义、词性、音标以及教材配套的例句。
- **结构化存储**：每一个识别出的单词都被视为一个“知识块 (Block)”，包含完整的元数据。

### 第二步：听说读写题型加工 (Multi-dimensional Processing)
AI 会根据提取出的单词列表，自动生成 2-4 种不同维度的练习题型，涵盖听、说、读、写四个维度。

#### 核心训练题型：
- **听 (Listening)**：
  - 听音选词 / 听音选图
  - 听句默写
  - 互动听力（理解故事并总结）
- **说 (Speaking)**：
  - 跟读打分（实时口语评测）
  - 看图说话（描述图片内容）
  - 命题口语（根据关键词组织语言）
- **读 (Reading)**：
  - 单词配图（视觉联系记忆）
  - 中文释义选择（语义巩固）
  - 互动阅读填空（上下文应用）
- **写 (Writing)**：
  - 拼写填空（由义到形的转化）
  - 命题写作（应用所学单词进行创作）

### 第三步：语音与交互服务集成 (Service Integration)
系统集成了先进的语音技术，为训练提供底层支持：
- **TTS (语音合成)**：为每个单词和句子生成标准的母语发音。
- **ASR (语音识别)**：捕捉用户的语音输入，转化为文本。
- **口语测评**：对比用户发音与标准音频，提供准确的打分和改进建议。

### 第四步：自适应学习计划
根据生成的训练任务，系统会自动编排学习周期：
- 优先安排基础的“识词”和“读词”任务。
- 随后进阶到“听写”和“应用”任务。
- 确保用户在计划周期内对每个单词都完成了从“认识”到“会用”的闭环。

---

## 3. 核心题型 Payload 参考
每个训练单元都包含结构化的 `payload` 数据，例如：
- **拼写填空**：包含含义、正确答案及拼写提示。
- **听音选图**：包含待合成的文本以及若干选项图片的生成提示词 (Image Prompts)。
- **跟读打分**：包含标准文本及评测参考标准。

---

## 4. 技术实现参考
- **AI 提取与生成**：参考 `src/aiService.ts` 中的 `extractContentBlocksWithAI` 和 `generateLearningUnitsFromBlocksWithAI`。
- **语音服务**：参考 `generateSpeech` (TTS) 和 `recognizeSpeech` (ASR) 实现。
